<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Palavra do Impostor</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  /* Fade-in/fade-out com slide */
  .fade {
    opacity: 0;
    transform: translateY(20px);
    pointer-events: none;
    transition: opacity 0.5s ease, transform 0.5s ease;
  }
  .fade.show {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }

  /* Timer circular */
  .timer-circle {
    transform-origin: 50% 50%;
    stroke-linecap: round;
    stroke-width: 16;
    fill: none;
    transition: stroke-dashoffset 0.2s linear, stroke 0.5s linear;
  }

  /* Responsividade de textos */
  h1 { font-size: clamp(2rem, 5vw, 4rem); }
  h2 { font-size: clamp(1.5rem, 4vw, 3rem); }
  p, button, input { font-size: clamp(1rem, 2.5vw, 1.5rem); }
</style>
</head>
<body class="bg-[#1a1a2e] text-white font-sans">

<div class="container mx-auto p-6 text-center max-w-2xl">

  <!-- Setup Screen -->
  <div id="setupScreen" class="fade show">
    <h1 class="mb-8 font-bold">Configurar Jogo</h1>
    
    <label class="block mb-2">Número de jogadores</label>
    <input id="playerCount" type="number" value="5" min="3" max="10" class="text-black p-3 rounded mb-6 w-40">

    <label class="block mb-2">Tempo da Partida (minutos)</label>
    <input id="gameTime" type="number" value="5" min="1" max="30" class="text-black p-3 rounded mb-6 w-40">

    <label class="block mb-2">Palavra Secreta</label>
    <input id="secretWord" type="text" class="text-black p-3 rounded mb-6 w-full">

    <label class="block mb-2">Dica para o impostor</label>
    <input id="gameHint" type="text" class="text-black p-3 rounded mb-6 w-full">

    <button onclick="chooseRandomWord()" class="bg-orange-500 hover:bg-orange-600 px-8 py-4 rounded-lg font-bold mb-6">Escolher Palavra Aleatória</button>
    <button onclick="startGame()" class="bg-blue-600 hover:bg-blue-700 px-8 py-4 rounded-lg font-bold">Iniciar</button>
  </div>

  <!-- Role Reveal Screen -->
  <div id="roleScreen" class="fade">
    <h2 id="roleTitle" class="mb-6 font-bold"></h2>
    <div id="wordBox" class="hidden p-8 bg-gray-800 rounded-lg mb-6 font-extrabold"></div>
    <button id="seeWordBtn" onclick="seeWord()" class="bg-green-600 px-8 py-4 rounded-lg font-bold mb-4">Ver Palavra</button>
    <button id="hideWordBtn" onclick="hideWord()" class="hidden bg-yellow-600 px-8 py-4 rounded-lg font-bold mb-4">Ocultar</button>
    <button id="nextBtn" onclick="nextPlayer()" class="bg-blue-600 px-8 py-4 rounded-lg font-bold mb-4">Próximo Jogador</button>
    <button id="startMatchBtn" onclick="startMatch()" class="hidden bg-purple-600 px-8 py-4 rounded-lg font-bold">Iniciar Partida</button>
  </div>

  <!-- Match Screen -->
  <div id="matchScreen" class="fade">
    <h2 class="mb-6 font-bold">Partida em andamento</h2>
    <p id="turnInfo" class="mb-6"></p>
    <div class="flex justify-center mb-8 relative">
      <svg width="clamp(150px,30vw,250px)" height="clamp(150px,30vw,250px)">
        <circle cx="100" cy="100" r="90" class="timer-circle" stroke="#10b981" stroke-dasharray="565.48" stroke-dashoffset="565.48"></circle>
        <text id="timerText" x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#10b981" font-weight="bold">0:00</text>
      </svg>
    </div>
    <button onclick="endMatch()" class="bg-red-600 px-8 py-4 rounded-lg font-bold">Encerrar e Votar</button>
  </div>

  <!-- Voting Screen -->
  <div id="votingScreen" class="fade">
    <h2 class="mb-8 font-bold">Quem é o impostor?</h2>
    <div id="voteOptions" class="grid gap-4"></div>
  </div>

  <!-- Result Screen -->
  <div id="resultScreen" class="fade">
    <h2 id="resultTitle" class="mb-6 font-bold"></h2>
    <p id="resultMessage" class="mb-6"></p>
    <p>A palavra era:</p>
    <div id="revealWord" class="p-6 bg-gray-800 rounded-lg mb-8 font-extrabold"></div>
    <button onclick="resetGame()" class="bg-green-600 px-8 py-4 rounded-lg font-bold">Novo Jogo</button>
  </div>

</div>

<script>
const wordList = [
  // 50 Frutas
  { word: "Manga", hint: "Fruta" },
  { word: "Banana", hint: "Fruta" },
  { word: "Morango", hint: "Fruta" },
  { word: "Abacaxi", hint: "Fruta" },
  { word: "Laranja", hint: "Fruta" },
  { word: "Maçã", hint: "Fruta" },
  { word: "Uva", hint: "Fruta" },
  { word: "Pera", hint: "Fruta" },
  { word: "Kiwi", hint: "Fruta" },
  { word: "Ameixa", hint: "Fruta" },
  { word: "Goiaba", hint: "Fruta" },
  { word: "Melancia", hint: "Fruta" },
  { word: "Melão", hint: "Fruta" },
  { word: "Limão", hint: "Fruta" },
  { word: "Pêssego", hint: "Fruta" },
  { word: "Cereja", hint: "Fruta" },
  { word: "Framboesa", hint: "Fruta" },
  { word: "Amora", hint: "Fruta" },
  { word: "Jabuticaba", hint: "Fruta" },
  { word: "Acerola", hint: "Fruta" },
  { word: "Pitanga", hint: "Fruta" },
  { word: "Caju", hint: "Fruta" },
  { word: "Carambola", hint: "Fruta" },
  { word: "Caqui", hint: "Fruta" },
  { word: "Damasco", hint: "Fruta" },
  { word: "Figo", hint: "Fruta" },
  { word: "Groselha", hint: "Fruta" },
  { word: "Mangostão", hint: "Fruta" },
  { word: "Maracujá", hint: "Fruta" },
  { word: "Romã", hint: "Fruta" },
  { word: "Tangerina", hint: "Fruta" },
  { word: "Bergamota", hint: "Fruta" },
  { word: "Cupuaçu", hint: "Fruta" },
  { word: "Graviola", hint: "Fruta" },
  { word: "Physalis", hint: "Fruta" },
  { word: "Nêspera", hint: "Fruta" },
  { word: "Ciriguela", hint: "Fruta" },
  { word: "Marmelo", hint: "Fruta" },
  { word: "Lichia", hint: "Fruta" },
  { word: "Kumquat", hint: "Fruta" },
  { word: "Jaca", hint: "Fruta" },
  { word: "Atemóia", hint: "Fruta" },
  { word: "Pitaya", hint: "Fruta" },
  { word: "Sapoti", hint: "Fruta" },
  { word: "Uxi", hint: "Fruta" },
  { word: "Murici", hint: "Fruta" },
  { word: "Biribá", hint: "Fruta" },
  { word: "Tamarindo", hint: "Fruta" },

  // 50 Animais
  { word: "Leão", hint: "Animal" },
  { word: "Elefante", hint: "Animal" },
  { word: "Cavalo", hint: "Animal" },
  { word: "Tigre", hint: "Animal" },
  { word: "Cachorro", hint: "Animal" },
  { word: "Gato", hint: "Animal" },
  { word: "Coelho", hint: "Animal" },
  { word: "Porco", hint: "Animal" },
  { word: "Vaca", hint: "Animal" },
  { word: "Ovelha", hint: "Animal" },
  { word: "Cabra", hint: "Animal" },
  { word: "Macaco", hint: "Animal" },
  { word: "Gorila", hint: "Animal" },
  { word: "Zebra", hint: "Animal" },
  { word: "Girafa", hint: "Animal" },
  { word: "Hipopótamo", hint: "Animal" },
  { word: "Rinoceronte", hint: "Animal" },
  { word: "Crocodilo", hint: "Animal" },
  { word: "Jacaré", hint: "Animal" },
  { word: "Leão-marinho", hint: "Animal" },
  { word: "Golfinho", hint: "Animal" },
  { word: "Baleia", hint: "Animal" },
  { word: "Tubarão", hint: "Animal" },
  { word: "Peixe", hint: "Animal" },
  { word: "Pinguim", hint: "Animal" },
  { word: "Urso", hint: "Animal" },
  { word: "Raposa", hint: "Animal" },
  { word: "Lobo", hint: "Animal" },
  { word: "Rato", hint: "Animal" },
  { word: "Camundongo", hint: "Animal" },
  { word: "Esquilo", hint: "Animal" },
  { word: "Coruja", hint: "Animal" },
  { word: "Águia", hint: "Animal" },
  { word: "Falcão", hint: "Animal" },
  { word: "Pombo", hint: "Animal" },
  { word: "Galinha", hint: "Animal" },
  { word: "Peru", hint: "Animal" },
  { word: "Pato", hint: "Animal" },
  { word: "Ganso", hint: "Animal" },
  { word: "Pavão", hint: "Animal" },
  { word: "Camelo", hint: "Animal" },
  { word: "Búfalo", hint: "Animal" },
  { word: "Hiena", hint: "Animal" },
  { word: "Anta", hint: "Animal" },
  { word: "Tatu", hint: "Animal" },
  { word: "Tamanduá", hint: "Animal" },
  { word: "Mico", hint: "Animal" },

  // 100 Objetos
  { word: "Computador", hint: "Objeto" },
  { word: "Cadeira", hint: "Objeto" },
  { word: "Celular", hint: "Objeto" },
  { word: "Livro", hint: "Objeto" },
  { word: "Mesa", hint: "Objeto" },
  { word: "Caneta", hint: "Objeto" },
  { word: "Lâmpada", hint: "Objeto" },
  { word: "Televisão", hint: "Objeto" },
  { word: "Relógio", hint: "Objeto" },
  { word: "Óculos", hint: "Objeto" },
  { word: "Chave", hint: "Objeto" },
  { word: "Porta", hint: "Objeto" },
  { word: "Janela", hint: "Objeto" },
  { word: "Sapato", hint: "Objeto" },
  { word: "Meia", hint: "Objeto" },
  { word: "Camisa", hint: "Objeto" },
  { word: "Calça", hint: "Objeto" },
  { word: "Boné", hint: "Objeto" },
  { word: "Guarda-chuva", hint: "Objeto" },
  { word: "Mochila", hint: "Objeto" },
  { word: "Mala", hint: "Objeto" },
  { word: "Rádio", hint: "Objeto" },
  { word: "Impressora", hint: "Objeto" },
  { word: "Teclado", hint: "Objeto" },
  { word: "Mouse", hint: "Objeto" },
  { word: "Monitor", hint: "Objeto" },
  { word: "Fone", hint: "Objeto" },
  { word: "Garrafa", hint: "Objeto" },
  { word: "Copo", hint: "Objeto" },
  { word: "Prato", hint: "Objeto" },
  { word: "Garfo", hint: "Objeto" },
  { word: "Faca", hint: "Objeto" },
  { word: "Colher", hint: "Objeto" },
  { word: "Panela", hint: "Objeto" },
  { word: "Fogão", hint: "Objeto" },
  { word: "Geladeira", hint: "Objeto" },
  { word: "Microondas", hint: "Objeto" },
  { word: "Toalha", hint: "Objeto" },
  { word: "Sabonete", hint: "Objeto" },
  { word: "Escova", hint: "Objeto" },
  { word: "Pasta de dente", hint: "Objeto" },
  { word: "Cinto", hint: "Objeto" },
  { word: "Espelho", hint: "Objeto" },
  { word: "Tapete", hint: "Objeto" },
  { word: "Sofá", hint: "Objeto" },
  { word: "Poltrona", hint: "Objeto" },
  { word: "Estante", hint: "Objeto" },
  { word: "Armário", hint: "Objeto" },
  { word: "Gaveta", hint: "Objeto" },
  { word: "Lixeira", hint: "Objeto" },
  { word: "Vaso", hint: "Objeto" },
  { word: "Planta", hint: "Objeto" },
  { word: "Quadro", hint: "Objeto" },
  { word: "Telefone", hint: "Objeto" },
  { word: "Cabide", hint: "Objeto" },
  { word: "Ventilador", hint: "Objeto" },
  { word: "Ar-condicionado", hint: "Objeto" },
  { word: "Aquecedor", hint: "Objeto" },
  { word: "Balde", hint: "Objeto" },
  { word: "Vassoura", hint: "Objeto" },
  { word: "Pá", hint: "Objeto" },
  { word: "Martelo", hint: "Objeto" },
  { word: "Chave inglesa", hint: "Objeto" },
  { word: "Furadeira", hint: "Objeto" },
  { word: "Serra", hint: "Objeto" },
  { word: "Pregos", hint: "Objeto" },
  { word: "Parafuso", hint: "Objeto" },
  { word: "Carregador", hint: "Objeto" },
  { word: "Bateria", hint: "Objeto" },
  { word: "Lâmina", hint: "Objeto" },
  { word: "Tesoura", hint: "Objeto" },
  { word: "Cola", hint: "Objeto" },
  { word: "Fita adesiva", hint: "Objeto" },
  { word: "Calculadora", hint: "Objeto" },
  { word: "Agenda", hint: "Objeto" },
  { word: "Caderno", hint: "Objeto" },
  { word: "Lápis", hint: "Objeto" },
  { word: "Borracha", hint: "Objeto" },
  { word: "Régua", hint: "Objeto" },
  { word: "Estojo", hint: "Objeto" },
  { word: "Lanterna", hint: "Objeto" },
  { word: "Pilha", hint: "Objeto" },
  { word: "Relógio de parede", hint: "Objeto" },
  { word: "Abajur", hint: "Objeto" },
  { word: "Cortina", hint: "Objeto" },
  { word: "Rede", hint: "Objeto" },
  { word: "Brinquedo", hint: "Objeto" },

  // (continuação objetos para completar 100)
  { word: "Boneca", hint: "Objeto" },
  { word: "Carrinho", hint: "Objeto" },
  { word: "Tabuleiro", hint: "Objeto" },
  { word: "Baralho", hint: "Objeto" },
  { word: "Tábua", hint: "Objeto" },
  { word: "Liquidificador", hint: "Objeto" },
  { word: "Batedeira", hint: "Objeto" },
  { word: "Cafeteira", hint: "Objeto" },
  { word: "Torradeira", hint: "Objeto" },
  { word: "Frigideira", hint: "Objeto" },
  { word: "Rolo de massa", hint: "Objeto" },
  { word: "Chaleira", hint: "Objeto" },
  { word: "Tupperware", hint: "Objeto" },
  { word: "Guarda-roupa", hint: "Objeto" },
  { word: "Colchão", hint: "Objeto" },
  { word: "Travesseiro", hint: "Objeto" },
  { word: "Cobertor", hint: "Objeto" },
  { word: "Lençol", hint: "Objeto" },
  { word: "Cabideiro", hint: "Objeto" },
  { word: "Espátula", hint: "Objeto" },
  { word: "Ralador", hint: "Objeto" },
  { word: "Pano", hint: "Objeto" },
  { word: "Porta-retrato", hint: "Objeto" },
  { word: "Tapete de entrada", hint: "Objeto" },
  { word: "Suporte para livros", hint: "Objeto" },

  // 100 Profissões
  { word: "Médico", hint: "Profissão" },
  { word: "Enfermeiro", hint: "Profissão" },
  { word: "Professor", hint: "Profissão" },
  { word: "Advogado", hint: "Profissão" },
  { word: "Engenheiro", hint: "Profissão" },
  { word: "Arquiteto", hint: "Profissão" },
  { word: "Dentista", hint: "Profissão" },
  { word: "Psicólogo", hint: "Profissão" },
  { word: "Jornalista", hint: "Profissão" },
  { word: "Motorista", hint: "Profissão" },
  { word: "Piloto", hint: "Profissão" },
  { word: "Cozinheiro", hint: "Profissão" },
  { word: "Chef", hint: "Profissão" },
  { word: "Marceneiro", hint: "Profissão" },
  { word: "Pedreiro", hint: "Profissão" },
  { word: "Eletricista", hint: "Profissão" },
  { word: "Encanador", hint: "Profissão" },
  { word: "Carpinteiro", hint: "Profissão" },
  { word: "Soldador", hint: "Profissão" },
  { word: "Farmacêutico", hint: "Profissão" },
  { word: "Veterinário", hint: "Profissão" },
  { word: "Bombeiro", hint: "Profissão" },
  { word: "Policial", hint: "Profissão" },
  { word: "Militar", hint: "Profissão" },
  { word: "Juiz", hint: "Profissão" },
  { word: "Promotor", hint: "Profissão" },
  { word: "Bancário", hint: "Profissão" },
  { word: "Caixa", hint: "Profissão" },
  { word: "Atendente", hint: "Profissão" },
  { word: "Recepcionista", hint: "Profissão" },
  { word: "Programador", hint: "Profissão" },
  { word: "Desenvolvedor", hint: "Profissão" },
  { word: "Analista de sistemas", hint: "Profissão" },
  { word: "Gerente", hint: "Profissão" },
  { word: "Diretor", hint: "Profissão" },
  { word: "Ator", hint: "Profissão" },
  { word: "Atriz", hint: "Profissão" },
  { word: "Cantor", hint: "Profissão" },
  { word: "Músico", hint: "Profissão" },
  { word: "Pintor", hint: "Profissão" },
  { word: "Designer", hint: "Profissão" },
  { word: "Fotógrafo", hint: "Profissão" },
  { word: "Estilista", hint: "Profissão" },
  { word: "Costureira", hint: "Profissão" },
  { word: "Manicure", hint: "Profissão" },
  { word: "Barbeiro", hint: "Profissão" },
  { word: "Cabeleireiro", hint: "Profissão" },
  { word: "Esteticista", hint: "Profissão" },
  { word: "Tradutor", hint: "Profissão" },
  { word: "Intérprete", hint: "Profissão" },
  { word: "Bibliotecário", hint: "Profissão" },
  { word: "Agente de viagens", hint: "Profissão" },
  { word: "Guia turístico", hint: "Profissão" },
  { word: "Agricultor", hint: "Profissão" },
  { word: "Fazendeiro", hint: "Profissão" },
  { word: "Pescador", hint: "Profissão" },
  { word: "Jardineiro", hint: "Profissão" },
  { word: "Paisagista", hint: "Profissão" },
  { word: "Químico", hint: "Profissão" },
  { word: "Físico", hint: "Profissão" },
  { word: "Biólogo", hint: "Profissão" },
  { word: "Matemático", hint: "Profissão" },
  { word: "Estatístico", hint: "Profissão" },
  { word: "Economista", hint: "Profissão" },
  { word: "Contador", hint: "Profissão" },
  { word: "Auditor", hint: "Profissão" },
  { word: "Consultor", hint: "Profissão" },
  { word: "Corretor imobiliário", hint: "Profissão" },
  { word: "Corretor de seguros", hint: "Profissão" },
  { word: "Vendedor", hint: "Profissão" },
  { word: "Comerciante", hint: "Profissão" },
  { word: "Atleta", hint: "Profissão" },
  { word: "Treinador", hint: "Profissão" },
  { word: "Personal trainer", hint: "Profissão" },
  { word: "Instrutor", hint: "Profissão" },
  { word: "Coach", hint: "Profissão" },
  { word: "Síndico", hint: "Profissão" },
  { word: "Secretário", hint: "Profissão" },
  { word: "Assistente social", hint: "Profissão" },
  { word: "Nutricionista", hint: "Profissão" },
  { word: "Biomédico", hint: "Profissão" },
  { word: "Radiologista", hint: "Profissão" },
  { word: "Técnico de laboratório", hint: "Profissão" },
  { word: "Terapeuta ocupacional", hint: "Profissão" },
  { word: "Operador logístico", hint: "Profissão" },
  { word: "Operador de máquina", hint: "Profissão" },
  { word: "Cientista de dados", hint: "Profissão" },
  { word: "Administrador", hint: "Profissão" },
  { word: "Engenheiro de software", hint: "Profissão" },
  { word: "Analista de negócios", hint: "Profissão" },
  { word: "Analista financeiro", hint: "Profissão" },
  { word: "Especialista em segurança", hint: "Profissão" },
  { word: "Gestor de projetos", hint: "Profissão" },
  { word: "UX designer", hint: "Profissão" },
  { word: "UI designer", hint: "Profissão" },
  { word: "Desenhista industrial", hint: "Profissão" },
  { word: "Programador front-end", hint: "Profissão" },
  { word: "Programador back-end", hint: "Profissão" },
  { word: "Técnico em informática", hint: "Profissão" },
  { word: "Motorista de caminhão", hint: "Profissão" },
  { word: "Ceramista", hint: "Profissão" },
  { word: "Ferramenteiro", hint: "Profissão" },
  { word: "Analista de marketing", hint: "Profissão" },
  { word: "Produtor cultural", hint: "Profissão" },
  { word: "Diretor de arte", hint: "Profissão" },
  { word: "Empreendedor", hint: "Profissão" },
  { word: "Barista", hint: "Profissão" },
  { word: "Sommelier", hint: "Profissão" }
];


let lastImpostor = null;
const gameState = { players: [], impostorIndex: null, currentPlayer: 1, secretWord: '', hint: '', time: 0, timer: null, remainingTime: 0 };

function chooseRandomWord() {
  const chosen = wordList[Math.floor(Math.random() * wordList.length)];
  document.getElementById("secretWord").value = chosen.word;
  document.getElementById("gameHint").value = chosen.hint;
}

function chooseImpostor(count) {
  let impostor;
  do { impostor = Math.floor(Math.random() * (count - 1)) + 1; } 
  while (impostor === lastImpostor);
  lastImpostor = impostor;
  return impostor;
}

function showScreen(screenId) {
  document.querySelectorAll('.fade').forEach(s => s.classList.remove('show'));
  document.getElementById(screenId).classList.add('show');
}

function startGame() {
  const count = parseInt(document.getElementById("playerCount").value);
  gameState.secretWord = document.getElementById("secretWord").value.trim();
  gameState.hint = document.getElementById("gameHint").value.trim();
  gameState.players = Array.from({length: count}, (_, i) => `Jogador ${i+1}`);
  gameState.time = parseInt(document.getElementById("gameTime").value);
  gameState.remainingTime = gameState.time * 60;
  gameState.impostorIndex = chooseImpostor(count);
  gameState.currentPlayer = 1;

  showScreen('roleScreen');
  showRoleScreen();
}

function showRoleScreen() {
  document.getElementById("wordBox").classList.add("hidden");
  document.getElementById("seeWordBtn").classList.remove("hidden");
  document.getElementById("hideWordBtn").classList.add("hidden");
  document.getElementById("roleTitle").textContent = `Passe para ${gameState.players[gameState.currentPlayer]}`;
  if (gameState.currentPlayer === gameState.players.length - 1) {
    document.getElementById("nextBtn").classList.add("hidden");
    document.getElementById("startMatchBtn").classList.remove("hidden");
  } else {
    document.getElementById("nextBtn").classList.remove("hidden");
    document.getElementById("startMatchBtn").classList.add("hidden");
  }
}

function seeWord() {
  const wordBox = document.getElementById("wordBox");
  wordBox.classList.remove("hidden");
  document.getElementById("seeWordBtn").classList.add("hidden");
  document.getElementById("hideWordBtn").classList.remove("hidden");

  wordBox.textContent = gameState.currentPlayer === gameState.impostorIndex 
    ? `Dica: ${gameState.hint}` 
    : `${gameState.secretWord}`;

  const impostorInfo = document.createElement("p");
  impostorInfo.className = "mt-4 font-bold";
  impostorInfo.style.color = gameState.currentPlayer === gameState.impostorIndex ? "red" : "lime";
  impostorInfo.textContent = gameState.currentPlayer === gameState.impostorIndex ? "Você é o impostor!" : "Você NÃO é o impostor!";

  const existingInfo = wordBox.querySelector("p");
  if (existingInfo) wordBox.removeChild(existingInfo);
  wordBox.appendChild(impostorInfo);
}

function hideWord() { document.getElementById("wordBox").classList.add("hidden"); document.getElementById("seeWordBtn").classList.remove("hidden"); document.getElementById("hideWordBtn").classList.add("hidden"); }

function nextPlayer() { gameState.currentPlayer++; showRoleScreen(); }

function startMatch() {
  showScreen('matchScreen');
  const starter = Math.floor(Math.random() * (gameState.players.length - 1)) + 1;
  document.getElementById("turnInfo").textContent = `${gameState.players[starter]} começa a partida!`;
  startTimer();
}

function startTimer() {
  const timerText = document.getElementById("timerText");
  const circle = document.querySelector(".timer-circle");
  const radius = 90;
  const circumference = 2 * Math.PI * radius;
  circle.style.strokeDasharray = circumference;
  circle.style.strokeDashoffset = circumference;

  function updateTimer() {
    let min = Math.floor(gameState.remainingTime / 60);
    let sec = gameState.remainingTime % 60;
    timerText.textContent = `${min}:${sec.toString().padStart(2,'0')}`;

    const percent = 1 - (gameState.remainingTime / (gameState.time * 60));
    circle.style.strokeDashoffset = circumference * (1 - percent);
    circle.style.stroke = `hsl(${120 - percent * 120}, 100%, 50%)`; // gradiente verde -> vermelho

    if (gameState.remainingTime <= 0) { clearInterval(gameState.timer); endMatch(); }
    gameState.remainingTime--;
  }

  updateTimer();
  gameState.timer = setInterval(updateTimer, 1000);
}

function endMatch() { clearInterval(gameState.timer); showScreen('votingScreen'); showVotingScreen(); }

function showVotingScreen() {
  const voteOptions = document.getElementById("voteOptions");
  voteOptions.innerHTML = '';
  gameState.players.forEach((p, idx) => { if (idx === 0) return;
    const btn = document.createElement("button");
    btn.className = "bg-red-600 hover:bg-red-700 px-8 py-4 rounded-lg font-bold";
    btn.textContent = `Votar em ${p}`;
    btn.onclick = () => vote(idx);
    voteOptions.appendChild(btn);
  });
}

function vote(votedIndex) {
  showScreen('resultScreen');
  showResult(votedIndex);
}

function showResult(votedIndex) {
  document.getElementById("revealWord").textContent = gameState.secretWord;
  if (votedIndex === gameState.impostorIndex) {
    document.getElementById("resultTitle").textContent = "Vitória dos Jogadores!";
    document.getElementById("resultMessage").textContent = `${gameState.players[votedIndex]} era o impostor!`;
  } else {
    document.getElementById("resultTitle").textContent = "Vitória do Impostor!";
    document.getElementById("resultMessage").textContent = `Vocês votaram em ${gameState.players[votedIndex]}, mas o impostor era ${gameState.players[gameState.impostorIndex]}!`;
  }
}

function resetGame() { showScreen('setupScreen'); }
</script>
</body>
</html>
